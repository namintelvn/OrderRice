var registerDialog,socket=io(window.location.href),itemPrice=32e3,countRegister=0;socket.on("server-register-failed",function(){$("#register_label").html("Someone take your name then change it.")}),socket.on("server-register-success",function(a){countRegister=-1,registerDialog.dialog("close"),localStorage.setItem("name",a)}),socket.on("server-getlistfood",function(a){$("#content").html(a),$("img").each(function(a,b){$(b).attr("src","https://www.anzi.com.vn"+$(b).attr("src"))}),$(".des").remove(),$(".update").remove(),$(".name").each(function(){var a=$(this).text().trim();$(this).after(`<button name="${a}" class="btn-order btn btn-primary">Order</button>`),socket.emit("client-order",{name:a,flag:0})}),$(".btn-order").each(function(a,b){$(b).click(function(){localStorage.getItem("name")&&("Order"==$(this).text().trim()?($(this).text("Cancel").removeClass("btn-primary").addClass("btn-danger"),socket.emit("client-order",{name:$(this).attr("name"),flag:1})):($(this).text("Order").addClass("btn-primary").removeClass("btn-danger"),socket.emit("client-order",{name:$(this).attr("name"),flag:-1})))})}),$("#order").css("display","")}),socket.on("server-getlistorder",function(a){var b=a.orderItems,c=0,d=[];for(const e in $("#order tbody").html(""),b)if(b.hasOwnProperty(e)){const a=b[e].quantity;c+=a,$("#order tbody").append(`<tr><td>${e}</td><td>${a}</td><td>${itemPrice.toLocaleString()} Ä‘</td></tr>`),b[e].orderUser[localStorage.getItem("name")]&&d.push(e)}for(const b of d)$(`.btn-order[name="${b}"]`).text("Cancel").removeClass("btn-primary").addClass("btn-danger");$("#orderCount").text(c),$("#orderMoney").text((c*itemPrice).toLocaleString()+" \u0111"),""!==a.log&&$("textarea").text($("textarea").text()+"\n"+a.log)}),$(document).ready(function(){function a(){const a=localStorage.getItem("name");a?socket.emit("client-register",{targetName:a,flag:0}):registerDialog.dialog("open")}function b(){$("#register_name").val()&&socket.emit("client-register",{targetName:$("#register_name").val(),flag:1})}(function(){var a=new Date;$("#timeNow").html("TH\u1EF0C \u0110\u01A0N ("+a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()+")"),registerDialog=$("#dialog-register").dialog({autoOpen:!1,buttons:{Register:b},close:function(){switch(countRegister){case-1:return;case 0:$("#register_label").html("Tell me who are you ?"),countRegister++;break;case 1:$("#register_label").html("Don't make ask twice! Who the fuck are you?"),countRegister++;break;case 2:$("#register_label").html("You wanna die? Last chance, who are you?"),countRegister++;break;default:window.close();}registerDialog.dialog("open")}})})(),a(),function(){socket.emit("client-getlistfood")}(),socket.emit("client-getlistorder","")});